@startuml "Process View Level 2"

'User here is a generic user that can be Librarian or Reader based on context

skinparam participant {
    BackgroundColor LightBlue
    BorderColor Black
}

skinparam actor {
    BackgroundColor White
    BorderColor Black
}

skinparam sequence {
    ArrowColor Black
    LifeLineBorderColor Black
    LifeLineBackgroundColor LightBlue
}

actor User
participant "LMS API" as API
participant "Controller" as Controller
participant "Service" as Service
participant "Repository" as Repo
participant "Database" as DB

User -> API: 1: Request lending details
activate API
API -> Controller: 1.1: Forward request
activate Controller
Controller -> Service: 1.2: Get lending data
activate Service
Service -> Repo: 1.3: Query lending
activate Repo
Repo -> DB: 1.4: Fetch lending record
activate DB
DB --> Repo: 1.5: Return record data
deactivate DB
Repo --> Service: 1.6: Return lending data
deactivate Repo
Service --> Controller: 1.7: Return processed data
deactivate Service
Controller --> API: 1.8: Return formatted response
deactivate Controller
API --> User: 1.9: Display lending details
deactivate API

caption Process View (Level 2) - Lending Details Request Flow with System Components
@enduml