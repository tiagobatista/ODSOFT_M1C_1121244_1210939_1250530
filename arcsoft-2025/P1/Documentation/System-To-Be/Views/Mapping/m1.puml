
@startuml "Mapping View - Logic to Implementation (System-to-be)"

skinparam packageStyle rectangle
skinparam shadowing false

' Left side - Logic View Components
package "Logic View\n(Level 3 Components)" as LogicView {
    rectangle "Frameworks & Drivers" #LightCyan {
        component "Router" as LogicRouter
        component "Driver" as LogicDriver
        component "ISBNDriver" as LogicISBNDriver
    }

    rectangle "Interface Adapters" #LightGreen {
        component "Controller" as LogicController
        component "Repository" as LogicRepository
        component "ISBNAdapter" as LogicISBNAdapter
    }

    rectangle "Application Business Rules" #LightPink {
        component "Service" as LogicService
    }

    rectangle "Enterprise Business Rules" #Wheat {
        component "Model" as LogicModel
    }
}

' Right side - Implementation View Packages
package "Implementation View\n(Level 3 Packages)" as ImplView {

    package "Domain Packages" {
        rectangle "BookManagement\nAuthorManagement\nLendingManagement\n..." as DomainPkgs #LightBlue
    }

    package "ISBNRetrieval" as ISBNPkg #LightBlue

    package "idgenerate" as IDGenPkg #LightBlue

    package "Configuration" as ConfigPkg #LightBlue

    package "ExternalServices" as ExtServicesPkg #LightBlue
}

' Mappings with labels
LogicRouter -.> DomainPkgs : "maps to\nAPI layer"
LogicController -.> DomainPkgs : "maps to\nAPI/Controllers"
LogicService -.> DomainPkgs : "maps to\nServices"
LogicModel -.> DomainPkgs : "maps to\nModel"
LogicRepository -.> DomainPkgs : "maps to\nRepositories"
LogicDriver -.> DomainPkgs : "maps to\nInfrastructure.repositories.impl"

LogicISBNDriver -.> ISBNPkg : "maps to\nDrivers"
LogicISBNAdapter -.> ISBNPkg : "maps to\nAdapters"

LogicModel -.> IDGenPkg : "uses for\nID generation"

LogicDriver -.> ConfigPkg : "uses for\nDB selection"
LogicISBNDriver -.> ConfigPkg : "uses for\nISBN provider selection"

LogicISBNDriver -.> ExtServicesPkg : "uses for\nexternal API integration"

note right of DomainPkgs
  Each domain package
  (e.g., BookManagement)
  contains:
  - API (Controllers)
  - Services
  - Model
  - Repositories
  - Infrastructure.repositories.impl
end note

note right of ISBNPkg
  ISBN Retrieval Package contains:
  - GoogleBooksDriver
  - OpenLibraryDriver
  - CustomCombinedDriver
  - ISBNAdapter
end note

caption Mapping View - Logic to Implementation (System-to-be)
@enduml
